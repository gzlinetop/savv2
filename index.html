<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>MiPlayer ‚Äî Corregido</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Manifest PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#6C4AE2">

  <!-- iOS / Apple -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MiPlayer">

  <!-- Android / general hint to be installable -->
  <meta name="mobile-web-app-capable" content="yes">

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="wrap">
    <!-- LEFT (reproductor) -->
    <div class="left" id="leftCard" aria-label="Reproductor">
      <div class="top-controls">
        <div class="title-small">NOW PLAYING</div>
        <div style="display:flex;gap:8px">
          <button class="icon-btn" id="btnQueue" title="Cola">‚ò∞</button>
          <button class="icon-btn" id="btnMinimize" title="Minimizar">‚îÄ</button>

          <!-- BOT√ìN INSTALAR (se muestra solo si beforeinstallprompt se dispara) -->
          <button class="icon-btn" id="btnInstall" title="Instalar" style="display:none">‚¨áÔ∏é</button>
        </div>
      </div>

      <div class="player-area">
        <div class="vinyl" id="vinylCover" style="background-image:url('https://dummyimage.com/600x600/fff/000&text=?')">
          <div class="ring" id="ringInner">
            <div id="vinylCenter" style="width:48px;height:48px;border-radius:50%;background:rgba(0,0,0,0.12);display:flex;align-items:center;justify-content:center">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="5" stroke="white" stroke-width="1"></circle></svg>
            </div>
          </div>
        </div>

        <div style="text-align:center">
          <div class="track-title" id="nowTitle">No se reproduce</div>
          <div class="track-sub" id="nowArtist">Busca y reproduce</div>
        </div>

        <div class="video-box" id="videoBox"><div id="ytVisible"></div></div>

        <div class="controls">
          <button class="control" id="shuffleBtn" title="Aleatorio">üîÄ</button>
          <button class="control" id="prevBtn" title="Anterior">‚èÆ</button>
          <button class="play" id="playBtn" title="Play/Pausa"><svg id="playIcon" width="30" height="30" viewBox="0 0 24 24" fill="none"><path d="M5 3v18l15-9L5 3z" fill="#1b0a00"></path></svg></button>
          <button class="control" id="nextBtn" title="Siguiente">‚è≠</button>
          <button class="control" id="repeatBtn" title="Repetir">üîÅ</button>
        </div>

        <div class="progress" aria-hidden="false"><div class="bar" id="progressBar"></div></div>

        <div style="display:flex;gap:8px;margin-top:14px;align-items:center">
          <button class="icon-btn" id="btnVideoToggle" title="Ocultar/Ver video">üéû</button>
          <button class="icon-btn" id="btnCreatePL" title="Crear playlist" style="width:44px;height:40px;padding:6px;font-weight:700">+</button>
          <button class="icon-btn" id="btnFullScreen" title="Pantalla completa">‚§¢</button>
        </div>
      </div>

      <button class="minimize" id="minimizeBtn">Minimizar</button>
    </div>

    <!-- RIGHT -->
    <div class="right" id="rightPanel">
      <div class="search-row">
        <div class="search-box">
          <svg width="18" height="18"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6"></path></svg>
          <input id="searchInput" placeholder="Buscar (m√°x 7 resultados)" autocomplete="off"/>
          <button id="searchBtn" class="icon-btn" style="width:40px;height:40px;padding:6px">üîé</button>
        </div>
      </div>

      <div class="actions-row">
        <div class="section-tabs" role="tablist">
          <div class="tab active" data-tab="tab-list">Lista</div>
          <div class="tab" data-tab="tab-recientes">Recientes</div>
          <div class="tab" data-tab="tab-favorites">Favoritos</div>
          <div class="tab" data-tab="tab-playlists">Playlists</div>
        </div>
        <div class="muted">Tus canciones</div>
      </div>

      <div class="list" id="listArea">
        <div style="padding:32px;text-align:center;color:var(--muted)">Busca una canci√≥n para comenzar</div>
      </div>
    </div>
  </div>

  <div class="mini hidden" id="miniPlayer" aria-hidden="true">
    <div class="mthumb" id="miniThumb" style="background-image:url('https://dummyimage.com/600x600/222/fff')"></div>
    <div class="mmeta">
      <div class="mname" id="miniTitle">No se reproduce</div>
      <div class="msub" id="miniArtist">‚Äî</div>
    </div>
    <div style="display:flex;align-items:center;gap:8px">
      <button class="icon-btn" id="miniPrev">‚èÆ</button>
      <button class="icon-btn" id="miniPlay"><svg id="miniPlayIcon" width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M5 3v18l15-9L5 3z" fill="#111"></path></svg></button>
      <button class="icon-btn" id="miniNext">‚è≠</button>
    </div>
  </div>

  <div id="modalRoot" class="hidden"></div>
  <div id="toastRoot" class="hidden"></div>
  <div id="ytApiHolder" style="display:none"></div>

  <!-- script principal -->
  <script src="script.js"></script>
</body>
</html>
